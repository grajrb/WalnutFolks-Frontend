# Deployment Guide

## Quick Start - Deploy to Vercel (Recommended)

Vercel is the easiest way to deploy React applications. It integrates directly with GitHub for automatic deployments.

### Step 1: Push to GitHub

First, push your code to GitHub (see `GITHUB_SETUP.md`):

```bash
git remote add origin https://github.com/YOUR_USERNAME/voice-analytics-dashboard.git
git branch -M main
git push -u origin main
```

### Step 2: Deploy to Vercel

1. Go to [vercel.com](https://vercel.com)
2. Click "Sign Up" or "Login" (use GitHub to sign up)
3. Click "Add New..." ‚Üí "Project"
4. Import your GitHub repository
5. Configure project:
   - **Framework Preset**: Vite
   - **Build Command**: `npm run build` (should be auto-detected)
   - **Output Directory**: `dist` (should be auto-detected)

6. Add Environment Variables:
   - Click "Environment Variables"
   - Add `VITE_SUPABASE_URL` = your_supabase_url
   - Add `VITE_SUPABASE_ANON_KEY` = your_supabase_anon_key

7. Click "Deploy"

Vercel will automatically build and deploy your application. Your site will be live at:
```
https://voice-analytics-dashboard-[random-id].vercel.app
```

### Automatic Deployments

Every time you push to the `main` branch, Vercel will automatically:
1. Build your application
2. Run tests (if configured)
3. Deploy to production

You can see deployment status in your Vercel dashboard.

---

## Alternative: Deploy to Netlify

### Step 1: Connect GitHub Repository

1. Go to [netlify.com](https://netlify.com)
2. Click "Add new site" ‚Üí "Import an existing project"
3. Connect your GitHub account and select your repository

### Step 2: Configure Build Settings

1. **Build command**: `npm run build`
2. **Publish directory**: `dist`
3. **Add environment variables**:
   - `VITE_SUPABASE_URL`
   - `VITE_SUPABASE_ANON_KEY`

### Step 3: Deploy

1. Click "Deploy site"
2. Netlify will build and deploy your site

Your site will be available at:
```
https://[your-site-name].netlify.app
```

---

## Alternative: Docker Deployment

### Build Docker Image

```dockerfile
# Dockerfile
FROM node:20-alpine

WORKDIR /app

# Install dependencies
COPY package*.json ./
RUN npm install

# Copy source
COPY . .

# Build application
RUN npm run build

# Serve with a simple server
FROM node:20-alpine
WORKDIR /app
RUN npm install -g serve
COPY --from=0 /app/dist ./dist
EXPOSE 3000
CMD ["serve", "-s", "dist", "-l", "3000"]
```

Build and run:
```bash
docker build -t voice-analytics-dashboard .
docker run -p 3000:3000 -e VITE_SUPABASE_URL=your_url -e VITE_SUPABASE_ANON_KEY=your_key voice-analytics-dashboard
```

---

## Alternative: AWS Amplify

### Deploy with Amplify

```bash
npm install -g @aws-amplify/cli

# Configure Amplify
amplify configure

# Initialize Amplify in your project
amplify init

# Add hosting
amplify add hosting

# Publish
amplify publish
```

---

## Post-Deployment

### Update GitHub Repository

After deployment, update your GitHub repository:

1. Edit `README.md`:
   ```markdown
   ## Live Demo
   
   [View the live application](https://your-deployed-url.com)
   ```

2. Go to GitHub repository Settings
3. Update "Website" field with your deployed URL
4. Update "About" section with the description

### Custom Domain

All platforms support custom domains:

**Vercel**: Settings ‚Üí Domains ‚Üí Add custom domain
**Netlify**: Settings ‚Üí Domain management ‚Üí Add custom domain
**AWS**: CloudFront distribution with Route 53

---

## Setting Up Supabase

Before deploying, ensure your Supabase project is ready:

1. Go to [supabase.com](https://supabase.com)
2. Create a new project or use existing
3. Create the `chart_data` table:
   ```sql
   CREATE TABLE chart_data (
     id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
     email VARCHAR(255) NOT NULL,
     chart_type VARCHAR(100) NOT NULL,
     data JSONB NOT NULL,
     created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
     updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
     UNIQUE(email, chart_type)
   );
   ```

4. Go to Settings ‚Üí API ‚Üí Copy:
   - Project URL ‚Üí `VITE_SUPABASE_URL`
   - anon (public) key ‚Üí `VITE_SUPABASE_ANON_KEY`

5. Configure Row Level Security (RLS):
   - Enable RLS on `chart_data` table
   - Create policy for public read/write (for demo)
   
   ```sql
   CREATE POLICY "Enable read access for all users" ON "public"."chart_data"
     AS PERMISSIVE FOR SELECT
     USING (true);
   
   CREATE POLICY "Enable insert for all users" ON "public"."chart_data"
     AS PERMISSIVE FOR INSERT
     WITH CHECK (true);
   
   CREATE POLICY "Enable update for all users" ON "public"."chart_data"
     AS PERMISSIVE FOR UPDATE
     USING (true);
   ```

---

## Environment Variables Reference

```env
# Supabase Configuration
VITE_SUPABASE_URL=https://xyzxyzxyz.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

Never commit `.env.local` - only use `.env.example` as template.

---

## Troubleshooting Deployments

### Build Fails

Check:
1. All dependencies are installed: `npm install`
2. No TypeScript errors: `tsc --noEmit`
3. Environment variables are set correctly
4. Check build logs in deployment platform

### Charts Not Displaying

1. Verify Recharts is installed: `npm list recharts`
2. Check browser console for errors
3. Verify Tailwind CSS is building correctly

### Supabase Connection Issues

1. Verify credentials in environment variables
2. Check Supabase dashboard - project active?
3. Check table exists and RLS policies are correct
4. Test connection with `curl`:
   ```bash
   curl -X GET "https://your-project.supabase.co/rest/v1/chart_data" \
     -H "apikey: your-anon-key"
   ```

---

## Monitoring & Logging

After deployment:

**Vercel Dashboard**:
- View build logs: Deployments ‚Üí Click deployment ‚Üí Logs
- View runtime logs: Functions ‚Üí Select endpoint

**Netlify Dashboard**:
- Build logs: Deploys ‚Üí View deploy log
- Function logs: Functions ‚Üí View logs

**AWS CloudWatch** (if using Lambda):
- Monitor performance and errors
- Set up alarms for failures

---

## Performance Tips

1. **Image Optimization**: Use next/image or similar
2. **Code Splitting**: Vite does this automatically
3. **Caching**: Configure cache headers in vercel.json
4. **CDN**: Most platforms provide automatic CDN
5. **Monitoring**: Set up error tracking with Sentry

---

## Next Steps

1. ‚úÖ Deploy application
2. ‚úÖ Add custom domain
3. ‚úÖ Set up monitoring
4. üìä Add analytics (Google Analytics, Mixpanel)
5. üîê Implement authentication
6. üì± Optimize for mobile
7. üöÄ Expand features

Good luck with your deployment! üöÄ
